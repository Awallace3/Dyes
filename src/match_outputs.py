import glob
import os
import subprocess

from numpy.lib.twodim_base import triu_indices_from

def fix_mex():
    os.chdir("../calc_zone")
    directories = glob.glob("geom*")
    for i in directories:
        print(i)
        os.chdir(i)
        out_files = glob.glob("*.out*")
        out_completion = glob.glob("mex_o.*")
        len_file = len(out_files)
        len_complete = len(out_completion)
        #print("len_complete", len(out_completion), "len_outfiles", len(out_files))
        if len_complete > len_file:
            for i in range(len_complete-len_file):
                del_o = out_completion.pop()
                #subprocess.call("echo " + del_o, shell=True)
                print('rm %s' % del_o)
                subprocess.call("rm " + del_o, shell=True)
        elif len_complete < len_file:
            for i in range((len_file - len_complete)):
                create_o = "mex_o.o%s0000" % str(i+15)
                print('touch %s' % create_o)
                #subprocess.call("echo " + create_o, shell=True)
                subprocess.call("touch " + create_o, shell=True)
        os.chdir("..")

def fix_mexc():
    os.chdir("../calc_zone")
    directories = glob.glob("geom*")
    for i in directories:
        print(i)
        os.chdir(i+"/mexc")
        
        out_files = glob.glob("*.out*")
        out_completion = glob.glob("mexc_o.*")
        len_file = len(out_files)
        len_complete = len(out_completion)
        #print("len_complete", len(out_completion), "len_outfiles", len(out_files))
        if len_complete > len_file:
            for i in range(len_complete-len_file):
                del_o = out_completion.pop()
                #subprocess.call("echo " + del_o, shell=True)
                print('rm %s' % del_o)
                subprocess.call("rm " + del_o, shell=True)
        elif len_complete < len_file:
            for i in range((len_file - len_complete)):
                create_o = "mexc_o.o%s0000" % str(i+15)
                print('touch %s' % create_o)
                #subprocess.call("echo " + create_o, shell=True)
                subprocess.call("touch " + create_o, shell=True)
        os.chdir("../..")

def remove_exc(monitor_jobs, dir_name='MO26X', path_dir='../Benchmark/results'):
    os.chdir(path_dir)
    for i in monitor_jobs:
        os.chdir(i)
        cmd = 'rm -r %s' % path_dir
        print(os.getcwd(), cmd)
        #subprocess.call(cmd, shell=True)
        os.chdir("..")


def main():
    #fix_mex()
    #fix_mexc()
    remove_exc(['AP25'])
main()
